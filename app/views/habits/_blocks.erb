

<h2 class="my-3">
  <% unless @date == Date.today %>
    <a href="/habits?date=<%=(@date+1).to_s(:db)%>"><i class="fa fa-chevron-left"></i></a>
  <% end %>
  <%= @date %>
  <a href="/habits?date=<%=(@date-1).to_s(:db)%>"><i class="fa fa-chevron-right"></i></a>
</h2>

<div class="row mt-3" id="habits">
  <% @habits.order('o asc').each { |habit| %>  
    <div data-pagelet-url="/habits/<%=habit.id%>/block?date=<%=@date.to_s(:db)%>" class="habit col-6 col-sm-3 mb-4" id="<%=habit.id%>"></div>
  <% } %>
</div>

<script>
  $(function () {
    $("div#habits").sortable({
      helper : 'clone',
      update: function (event, ui) {
        $.post('/habits/order', {habit_ids: $(event.target).sortable("toArray")})
      }
    });
  })
</script>