
<script>
  $(function () {
    $('#network-habits-tab').click(function () {
      $('#network-habits').html(LOADING).load('/habits/network')
    })
    $('#my-habits-tab').click(function () {
      $('#my-habits').html(LOADING).load('/habits/me')
    })
  })
</script>

<a id="add-habit" class="btn btn-primary" href="javascript:;" onclick="$(this).hide().next().show().find('input').focus()"><i class="fa fa-plus-circle"></i> Add habit</a>
<div style="display: none">
<%= partial :'habits/build' %>
</div>
<% if params[:add] %>
  <script>
    $(function () {
      $('#add-habit').click().next().find('input').first().focus()
    })
  </script>
<% end %>

<ul class="mt-3 nav nav-tabs" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#habit-tiles" role="tab">Your habits</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" id="my-habits-tab" data-toggle="tab" href="#my-habits" role="tab">Log</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="network-habits-tab" data-toggle="tab" href="#network-habits" role="tab">Friends</a>
  </li>  
</ul>

<div class="tab-content">
  <div class="tab-pane fade show active" id="habit-tiles" role="tabpanel">

<% if !(habits = current_account.habits).empty? %>
  <%= partial :'habits/blocks', :locals => {:habits => habits, :block_class => 'col-sm-4'} %>
<% end %>          

  </div>  
  <div class="tab-pane fade" id="my-habits" role="tabpanel"></div>
  <div class="tab-pane fade" id="network-habits" role="tabpanel"></div>  
</div>