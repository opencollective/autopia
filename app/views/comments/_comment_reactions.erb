<% if !comment.comment_reactions.find_by(account: current_account) %>
  <a style="background: white" class="rounded p-1 border border-primary" href="javascript:;" onclick="$(this).hide().next().css('display', 'inline').find('input').focus()">&#x2026;</a>

  <% form_tag "/comments/#{comment.id}/react", :class => 'form-inline', :style => 'display: none;' do %>
    <div class="input-group mb-1" style="width: 10rem;">
      <%= text_field_tag :body, :placeholder => 'Enter an emoji', :class => 'form-control d-inline' %>
      <div class="input-group-append">
        <button class="btn btn-primary" type="submit"><i class="fa fa-chevron-right"></i></button>
      </div>
    </div>  

  <% end %>
<% end %>


<% if comment.comment_reactions.count > 0 %>
  <% comment.comment_reactions.pluck(:body).uniq.each { |body| comment_reactions = comment.comment_reactions.where(body: body) %>  
    <% c = 'd-inline-block border rounded p-1 text-dark' %>
    <a style="text-decoration: none; background: white" <% if comment_reactions.find_by(account: current_account) %> title="Remove your reaction" class="pagelet-trigger border-primary <%=c%>" href="/comments/<%=comment.id%>/unreact" <% else %> class="<%=c%> border-light" <% end %> >
      <span data-toggle="tooltip" ><%= body %> <%=comment_reactions.count%></span>
      <span style="display: none">
        <%=comment_reactions.map { |comment_reaction| comment_reaction.account.name }.join('<br />') %> 
      </span>		
    </a>
  <% } %>
<% end %>